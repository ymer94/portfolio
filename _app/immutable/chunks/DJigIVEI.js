import{at as r,P as a,au as d,av as p,O as m,M as c}from"./CKdTFUIF.js";import{l as g}from"./DIeogL5L.js";function h(n,t,s){if(n==null)return t(void 0),r;const u=a(()=>n.subscribe(t,s));return u.unsubscribe?()=>u.unsubscribe():u}const i=[];function x(n,t=r){let s=null;const u=new Set;function f(o){if(d(n,o)&&(n=o,s)){const l=!i.length;for(const e of u)e[1](),i.push(e,n);if(l){for(let e=0;e<i.length;e+=2)i[e][0](i[e+1]);i.length=0}}}function b(o){f(o(n))}function _(o,l=r){const e=[o,l];return u.add(e),u.size===1&&(s=t(f,b)||r),o(n),()=>{u.delete(e),u.size===0&&s&&(s(),s=null)}}return{set:f,update:b,subscribe:_}}function z(n){let t;return h(n,s=>t=s)(),t}function y(n){c===null&&p(),g&&c.l!==null?q(c).m.push(n):m(()=>{const t=a(n);if(typeof t=="function")return t})}function M(n){c===null&&p(),y(()=>()=>a(n))}function q(n){var t=n.l;return t.u??(t.u={a:[],b:[],m:[]})}export{y as a,z as g,M as o,h as s,x as w};
